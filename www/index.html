<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Файл без названия</title>
		<script type="text/javascript">
			function addStatus(text){
				var date = new Date();
				document.getElementById('status').innerHTML =  
					date + ": " + text + "<br>" + document.getElementById('status').innerHTML;
			}
			function ready(){
				if ("WebSocket" in window) {
					// browser supports websockets
					var ws = new WebSocket("ws://localhost:~w/service");
					addStatus(ws);
					ws.onopen = function() {
						// websocket is connected
						addStatus("websocket connected!");
						// send hello data to server.
						ws.send("hello server!");
						addStatus("sent message to server: 'hello server'!");
					};
					ws.onmessage = function (evt) {
						var receivedMsg = evt.data;
						addStatus("server sent the following: '" + receivedMsg + "'");
					};
					ws.onclose = function() {
						// websocket was closed
						addStatus("websocket was closed");
					};
					btn = document.getElementById('send_btn');
					btn.onclick = function(){
						v = document.getElementById('txt').value;
						// alert(ws, v);
						ws.send(v);

					}; 
					// btn = document.getElementById('close');
				} else {
					// browser does not support websockets
					addStatus("sorry, your browser does not support websockets.");
				}
			};
			function force_open() {
				var ws = new WebSocket("wss://e-laptop.mshome.net:8080/s2");
				addStatus(ws);
				addStatus(ws.readyState);
			};
		</script>
	</head>
	<body onload="ready();"> 
		<input type="text" name="send_data" id="txt" />
		<input type="button" value="  Send  " id="send_btn" />
		<!-- <input type="button" value="  Close  " />  -->
		<input type="button" value="Force Open" onClick="force_open()" />
		<div id="status"></div>
	</body>
</html>